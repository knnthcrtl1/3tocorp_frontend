{"version":3,"sources":["Components/Authentication/AuthHelperMethods.js","assets/images/userIcon.png","assets/images/passwordIcon.png","assets/images/loginImg.png","Components/LoginComponent/LoginFormComponent/LoginFormComponent.js","Components/LoginComponent/LoginRightComponent/LoginRightComponent.js","Components/LoginComponent/LoginComponent.js"],"names":["AuthHelperMethods","login","_callee","data","route","C_Users_Kenneth_Cartel_Desktop_My_Projects_MERN_frontend_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","wrap","_context","prev","next","axios","post","headers","Content-Type","then","res","_this","setToken","token","catch","error","alert","stop","test","props","history","replace","loggedIn","getToken","isTokenExpired","decode","exp","Date","now","err","console","log","idToken","localStorage","setItem","concat","getItem","logout","removeItem","getConfirm","answer","module","exports","__webpack_require__","p","LoginFormComponent","this","signInErrorMessage","react_default","createElement","className","onSubmit","onSubmitForm","style","marginBottom","src","userIcon","alt","type","onChange","e","onEmailChange","placeholder","passwordIcon","onPasswordChange","Component","LoginRightComponent","loginImg","LoginComponent","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","Auth","event","setState","signInEmail","target","value","signInPassword","_ref","asyncToGenerator","regenerator_default","mark","preventDefault","JSON","stringify","username","state","password","_x","apply","arguments","LoginComponent_LoginFormComponent_LoginFormComponent","LoginComponent_LoginRightComponent_LoginRightComponent"],"mappings":"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","file":"static/js/5.1af16a2b.chunk.js","sourcesContent":["import decode from 'jwt-decode';\r\nimport axios from 'axios';\r\n\r\nexport default class AuthHelperMethods {\r\n\r\n    // Initializing important variables\r\n\r\n    login = async (data, route) => {\r\n\r\n        // Get a token from api server using the fetch api\r\n        // let url = 'http://localhost:3001/users/signin';\r\n        let url = 'https://backend-3tocorp.herokuapp.com/users/signin/';\r\n\r\n        await axios.post(url, data, {\r\n            headers: {\r\n                'Content-Type': 'application/json;charset=UTF-8',\r\n            }\r\n        })\r\n            .then(res => {\r\n                this.setToken(res.data.token) // Setting the token in localStorage\r\n                // if (res.status === 200) {\r\n                //     this.props.onRouteChange('home');\r\n                // }\r\n                // console.log(res.data.token);\r\n            })\r\n            .catch(error => {\r\n                // this.setState({\r\n                //     signInErrorMessage: true\r\n                // })\r\n                // console.log(error);\r\n                // return error;\r\n                alert('Wrong Credentials');\r\n            });\r\n\r\n    }\r\n\r\n    test = () => {\r\n        this.props.history.replace('/student')\r\n    }\r\n\r\n    // onChangeRoute = () => {\r\n    //     this.props.history.replace('/student')\r\n    // }\r\n\r\n    loggedIn = () => {\r\n        // Checks if there is a saved token and it's still valid\r\n        const token = this.getToken() // Getting token from localstorage\r\n        return !!token && !this.isTokenExpired(token) // handwaiving here\r\n    }\r\n\r\n    isTokenExpired = (token) => {\r\n        try {\r\n            const decoded = decode(token);\r\n            if (decoded.exp < Date.now() / 1000) { // Checking if token is expired.\r\n                return true;\r\n            }\r\n            else\r\n                return false;\r\n        }\r\n        catch (err) {\r\n            console.log(\"expired check failed! Line 42: AuthService.js\");\r\n            return false;\r\n        }\r\n    }\r\n\r\n    setToken = (idToken) => {\r\n        // Saves user token to localStorage\r\n        localStorage.setItem('id_token', `Bearer ${idToken}`)\r\n    }\r\n\r\n    getToken = () => {\r\n        // Retrieves the user token from localStorage\r\n        return localStorage.getItem('id_token')\r\n    }\r\n\r\n    logout = () => {\r\n        // Clear user token and profile data from localStorage\r\n        localStorage.removeItem('id_token');\r\n    }\r\n\r\n    getConfirm = () => {\r\n        // Using jwt-decode npm package to decode the token\r\n        let answer = decode(this.getToken());\r\n        console.log(\"Recieved answer!\");\r\n        return answer;\r\n    }\r\n\r\n    // fetch = (url, options) => {\r\n    //     // performs api calls sending the required authentication headers\r\n    //     const headers = {\r\n    //         'Accept': 'application/json',\r\n    //         'Content-Type': 'application/json'\r\n    //     }\r\n    //     // Setting Authorization header\r\n    //     // Authorization: Bearer xxxxxxx.xxxxxxxx.xxxxxx\r\n    //     if (this.loggedIn()) {\r\n    //         headers['Authorization'] = 'Bearer ' + this.getToken()\r\n    //     }\r\n\r\n    //     return fetch(url, {\r\n    //         headers,\r\n    //         ...options\r\n    //     })\r\n    //         .then(this._checkStatus)\r\n    //         .then(response => response.json())\r\n    // }\r\n\r\n    // _checkStatus = (response) => {\r\n    //     // raises an error in case response status is not a success\r\n    //     if (response.status >= 200 && response.status < 300) { // Success status lies between 200 to 300\r\n    //         return response\r\n    //     } else {\r\n    //         var error = new Error(response.statusText)\r\n    //         error.response = response\r\n    //         throw error\r\n    //     }\r\n    // }\r\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAf0lEQVRIS+2UWw6AIAwE5b49Tu+rkaQNbixLlBpN5LtMhz4oy8ARkbUNU9XCrnUDEIiwXoLnwczW7CPr0PgHe+PTSrFnYPB3jZvVJLJm20dXExMwoMXTOY5A9pLhBWENiz4fTHAwvgo9W28H34UiPBc8y7a1rsYp4NlQn+PPgTfJxVbgydFpIQAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAjUlEQVRIS+2VyxHAIAhEQ4nWoeVsHZl0mIwHMoTI5+LBTLzCPnCFkbbg1FoLEe0qrQA4PCl5wdba6cUBmHozEEG5oAUfgjVUi6N4LxqCrY4kfJTjgj0Pe1cM/yA4OwnWCEpLHh7/4Nsyzwr2L5PzWhBLFG3eaL1TjzcN3DuaYsWa4OinkbdKT0UGuj74ApZ+hRcBt6zKAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/loginImg.cfce86c1.png\";","import React, { Component } from 'react';\r\nimport './LoginFormComponent.css';\r\nimport userIcon from '../../../assets/images/userIcon.png';\r\nimport passwordIcon from '../../../assets/images/passwordIcon.png';\r\n\r\nclass LoginFormComponent extends Component {\r\n\r\n    render() {\r\n\r\n        const { signInErrorMessage } = this.props;\r\n\r\n        return (\r\n\r\n            <div className=\"login_commponent__content--login--form\">\r\n                <span className=\"login__component__content--logo\">\r\n                    Logo\r\n                </span>\r\n                {(signInErrorMessage) ?\r\n                    <div className=\"login__component--error--message\">\r\n                        <span>Incorrect username or password</span>\r\n                    </div>\r\n                    : null\r\n                }\r\n                <div className=\"login__component__content--main--form\">\r\n                    <form onSubmit={this.props.onSubmitForm}>\r\n                        <div className=\"input--container\" style={{ marginBottom: '60px' }}>\r\n                            <img src={userIcon} alt=\"\" />\r\n                            <input type=\"text\" className=\"login__component__content--input\" onChange={(e) => this.props.onEmailChange(e)} placeholder=\"Type your student ID number\" />\r\n                        </div>\r\n                        <div className=\"input--container\">\r\n                            <img src={passwordIcon} alt=\"\" />\r\n                            <input type=\"password\" className=\"login__component__content--input\" onChange={(e) => this.props.onPasswordChange(e)} placeholder=\"Type your password\" />\r\n                        </div>\r\n                        <div className=\"input--container--text\">\r\n                            <span className=\"input--forgot--password\">\r\n                                Forgot Password?\r\n                                            </span>\r\n                            <span className=\"input--register\">\r\n                                Register\r\n                                            </span>\r\n                        </div>\r\n                        <div className=\"input--container--button\">\r\n                            <button className=\"login__component__content--button\">Login</button>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LoginFormComponent;\r\n","import React, { Component } from 'react';\r\nimport './LoginRightComponent.css';\r\nimport loginImg from '../../../assets/images/loginImg.png';\r\n\r\nclass LoginRightComponent extends Component {\r\n    render() {\r\n        return (\r\n            <div className=\"login__component__content--image\">\r\n                <span className=\"login__component__content--title\">\r\n                    Language School\r\n                                </span>\r\n                <span className=\"login__component__content--sub--title  \">\r\n                    please make sure your account is secure\r\n                                </span>\r\n                <div className=\"login__component__content--login--image\">\r\n                    <img src={loginImg} alt=\"\" />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default LoginRightComponent;\r\n","import React, { Component } from 'react';\r\nimport './LoginComponent.css';\r\nimport LoginFormComponent from './LoginFormComponent/LoginFormComponent';\r\nimport LoginRightComponent from './LoginRightComponent/LoginRightComponent';\r\nimport AuthHelperMethods from '../Authentication/AuthHelperMethods';\r\n// import axios from 'axios';\r\n\r\nclass LoginComponent extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            signInEmail: '',\r\n            signInPassword: '',\r\n            signInErrorMessage: false\r\n        }\r\n\r\n    }\r\n\r\n    Auth = new AuthHelperMethods();\r\n\r\n    onEmailChange = (event) => {\r\n        this.setState({\r\n            signInEmail: event.target.value\r\n        })\r\n    }\r\n\r\n    onPasswordChange = (event) => {\r\n        this.setState({\r\n            signInPassword: event.target.value\r\n        })\r\n    }\r\n\r\n    onSubmitForm = async (e) => {\r\n        e.preventDefault();\r\n        // console.log(this.state.signInEmail, this.state.signInPassword);\r\n\r\n        let data = JSON.stringify({\r\n            username: this.state.signInEmail,\r\n            password: this.state.signInPassword\r\n        })\r\n\r\n        await this.Auth.login(data).then(res => {\r\n            if (res === false) {\r\n                return alert(\"Sorry those credentials don't exist!\");\r\n            }\r\n            this.props.history.replace('/');\r\n        })\r\n            .catch(err => {\r\n                console.log(err);\r\n            })\r\n\r\n\r\n        // let url = 'https://backend-3tocorp.herokuapp.com/users/signin';\r\n        // let url = 'http://localhost:3001/users/signin';\r\n\r\n        // await axios.post(url, data, {\r\n        //     headers: {\r\n        //         'Content-Type': 'application/json;charset=UTF-8',\r\n        //     }\r\n        // })\r\n        //     .then(res => {\r\n        //         if (res.status === 200) {\r\n        //             this.props.onRouteChange('home');\r\n        //         }\r\n        //         console.log(res.data.token);\r\n        //     })\r\n        //     .catch(error => {\r\n        //         this.setState({\r\n        //             signInErrorMessage: true\r\n        //         })\r\n        //         console.log(error);\r\n        //     })\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n\r\n        const { signInErrorMessage } = this.state;\r\n\r\n        return (\r\n            <div className=\"login__component\">\r\n                <div className=\"container\">\r\n                    <div className=\"row\">\r\n                        <div className=\"login__component__content\">\r\n                            <LoginFormComponent\r\n                                onEmailChange={this.onEmailChange}\r\n                                onPasswordChange={this.onPasswordChange}\r\n                                onSubmitForm={this.onSubmitForm}\r\n                                signInErrorMessage={signInErrorMessage}\r\n                            />\r\n                            <LoginRightComponent />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default LoginComponent;\r\n"],"sourceRoot":""}